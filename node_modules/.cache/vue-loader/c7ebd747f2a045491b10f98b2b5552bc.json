{"remainingRequest":"C:\\Users\\Pánfila\\Documents\\Vue\\Cristian_Alexis_Garcia\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Pánfila\\Documents\\Vue\\Cristian_Alexis_Garcia\\src\\views\\Detalles.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Pánfila\\Documents\\Vue\\Cristian_Alexis_Garcia\\src\\views\\Detalles.vue","mtime":1637905968156},{"path":"C:\\Users\\Pánfila\\Documents\\Vue\\Cristian_Alexis_Garcia\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Pánfila\\Documents\\Vue\\Cristian_Alexis_Garcia\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Pánfila\\Documents\\Vue\\Cristian_Alexis_Garcia\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Pánfila\\Documents\\Vue\\Cristian_Alexis_Garcia\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRiLCBzdG9yYWdlIH0gZnJvbSAiLi4vZGIiOwppbXBvcnQgTmF2YmFyIGZyb20gIi4uL2NvbXBvbmVudHMvTmF2YmFyLnZ1ZSI7CmltcG9ydCBOdWV2b0FudW5jaW8gZnJvbSAiLi4vY29tcG9uZW50cy9OdWV2b0FudW5jaW8udnVlIjsKaW1wb3J0IEFudW5jaW8gZnJvbSAiLi4vY29tcG9uZW50cy9BbnVuY2lvLnZ1ZSI7CmltcG9ydCBGb290ZXIgZnJvbSAiLi4vY29tcG9uZW50cy9Gb290ZXIudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEZXRhbGxlcyIsCiAgY29tcG9uZW50czogewogICAgTmF2YmFyLAogICAgTnVldm9BbnVuY2lvLAogICAgQW51bmNpbywKICAgIEZvb3RlciwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpZEFjdDogbnVsbCwKICAgICAgYW51bmNpb3M6IFtdLAogICAgICBpbWFnZW5lczogW10sCiAgICAgIG1vZGFsOiBmYWxzZSwKICAgICAgc2lndWllbnRlQW51bmNpbzogMCwKICAgICAgY2Fycml0bzogW10sCiAgICB9OwogIH0sCgogIGZpcmVzdG9yZTogewogICAgYW51bmNpb3M6IGRiLmNvbGxlY3Rpb24oImFudW5jaW9zIiksCiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0SW1hZ2VzKCk7CiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRyb3V0ZS5wYXJhbXMuY2Fycml0byk7CiAgICB0aGlzLmNhcnJpdG8gPSB0aGlzLiRyb3V0ZS5wYXJhbXMuY2Fycml0bzsgICAgCiAgfSwKCiAgbWV0aG9kczogewogICAgZ2V0TmV4dElkKCkgewogICAgICB0aGlzLnNpZ3VpZW50ZUFudW5jaW8gPSAwOwogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5hbnVuY2lvcy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICBpZiAodGhpcy5hbnVuY2lvc1tpbmRleF0uaWRBbnVuY2lvID4gdGhpcy5zaWd1aWVudGVBbnVuY2lvKSB7CiAgICAgICAgICB0aGlzLnNpZ3VpZW50ZUFudW5jaW8gPSB0aGlzLmFudW5jaW9zW2luZGV4XS5pZEFudW5jaW87CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuc2lndWllbnRlQW51bmNpbyA9IHRoaXMuc2lndWllbnRlQW51bmNpbyArIDE7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2lndWllbnRlQW51bmNpbyk7CiAgICB9LAoKICAgIGdldEltYWdlcygpIHsKICAgICAgbGV0IHJlZjsKICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgbGV0IGNhcnBldGEgPSBzdG9yYWdlLnJlZigpLmNoaWxkKHRoaXMuJHJvdXRlLnBhcmFtcy5hbnVuY2lvLnRvU3RyaW5nKCkpOwogICAgICBjYXJwZXRhLmxpc3RBbGwoKS50aGVuKChyZXMpID0+IHsKICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcmVzLml0ZW1zLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgcmVmID0gc3RvcmFnZS5yZWYocmVzLml0ZW1zW2luZGV4XS5mdWxsUGF0aCk7CiAgICAgICAgICByZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKCh1cmwpID0+IHsKICAgICAgICAgICAgX3RoaXMuaW1hZ2VuZXMucHVzaCh1cmwpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgYnVzY2FyKGNhZGVuYSl7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnSG9tZScsIHBhcmFtczoge2NhcnJpdG86IHRoaXMuJHJvdXRlLnBhcmFtcy5jYXJyaXRvLCBjYWRlbmE6IGNhZGVuYX19KQogICAgfSwKCiAgICBhZGRDYXJ0KGFudW5jaW8pIHsKICAgICAgbGV0IGl0ZW0gPSB7fTsKICAgICAgbGV0IGluY2x1eWUgPSBmYWxzZTsKICAgICAgbGV0IGNvbnRhZG9yID0gMDsKICAgICAgaXRlbS5wcm9kdWN0byA9IGFudW5jaW87CiAgICAgIGl0ZW0uY2FudGlkYWQgPSAxOwogICAgICBpdGVtLnN1YnRvdGFsID0gaXRlbS5wcm9kdWN0by5wcmVjaW8gKiBpdGVtLmNhbnRpZGFkOwoKICAgICAgaWYgKHRoaXMuY2Fycml0by5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLmNhcnJpdG8ucHVzaChpdGVtKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNhcnJpdG8pOwogICAgICAgIHRoaXMuc2hvd1RvYXN0KCJpbmZvIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2hpbGUgKGNvbnRhZG9yIDwgdGhpcy5jYXJyaXRvLmxlbmd0aCAmJiBpbmNsdXllID09PSBmYWxzZSkgewogICAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAgICJjYXJyaXRvIGlkQW51bmNpbzogIiArCiAgICAgICAgICAgICAgdGhpcy5jYXJyaXRvW2NvbnRhZG9yXS5wcm9kdWN0by5pZEFudW5jaW8gKwogICAgICAgICAgICAgICIgSXRlbSBpZEFudW5jaW86ICIgKwogICAgICAgICAgICAgIGl0ZW0ucHJvZHVjdG8uaWRBbnVuY2lvCiAgICAgICAgICApOwogICAgICAgICAgaWYgKAogICAgICAgICAgICB0aGlzLmNhcnJpdG9bY29udGFkb3JdLnByb2R1Y3RvLmlkQW51bmNpbyA9PSBpdGVtLnByb2R1Y3RvLmlkQW51bmNpbwogICAgICAgICAgKSB7CiAgICAgICAgICAgIGluY2x1eWUgPSB0cnVlOwogICAgICAgICAgICB0aGlzLmNhcnJpdG9bY29udGFkb3JdLmNhbnRpZGFkID0KICAgICAgICAgICAgICB0aGlzLmNhcnJpdG9bY29udGFkb3JdLmNhbnRpZGFkICsgMTsKICAgICAgICAgICAgdGhpcy5jYXJyaXRvW2NvbnRhZG9yXS5zdWJ0b3RhbCA9CiAgICAgICAgICAgICAgdGhpcy5jYXJyaXRvW2NvbnRhZG9yXS5wcm9kdWN0by5wcmVjaW8gKgogICAgICAgICAgICAgIHRoaXMuY2Fycml0b1tjb250YWRvcl0uY2FudGlkYWQ7CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJpbmZvIik7CiAgICAgICAgICB9CiAgICAgICAgICBjb250YWRvcisrOwogICAgICAgIH0KCiAgICAgICAgaWYgKGluY2x1eWUgPT09IGZhbHNlKSB7CiAgICAgICAgICB0aGlzLmNhcnJpdG8ucHVzaChpdGVtKTsKICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KCJpbmZvIik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIHNob3dNb2RhbChtb2RhbCkgewogICAgICB0aGlzLmdldE5leHRJZCgpOwogICAgICB0aGlzLm1vZGFsID0gbW9kYWw7CiAgICB9LAoKICAgIGhpZGVNb2RhbChtb2RhbCkgewogICAgICB0aGlzLm1vZGFsID0gbW9kYWw7CiAgICB9LAoKICAgIHNob3dUb2FzdCh2YXJpYW50KSB7CiAgICAgIGxldCB0aXRsZSA9ICIiOwogICAgICBsZXQgY29udGVudCA9ICIiOwogICAgICBpZiAodmFyaWFudCkgewogICAgICAgIGlmICh2YXJpYW50ID09PSAiaW5mbyIpIHsKICAgICAgICAgIHRpdGxlID0gIkNhcnJpdG8iOwogICAgICAgICAgY29udGVudCA9ICJQcm9kdWN0byBhw7FhZGlkbyBhbCBjYXJyaXRvLiI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRpdGxlID0gIk51ZXZvIEFudW5jaW8iOwogICAgICAgICAgY29udGVudCA9ICJBbnVuY2lvIGNyZWFkbyBjb3JyZWN0YW1lbnRlIjsKICAgICAgICB9CiAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChjb250ZW50LCB7CiAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICB2YXJpYW50OiB2YXJpYW50LAogICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Detalles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detalles.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <!-- NAVBAR -->\n    <navbar\n      @show=\"showModal\"\n      v-bind:carrito=\"$route.params.carrito\"\n      @buscar='buscar'\n      class=\"fixed-top\"\n      id=\"top\"\n      ref=\"top\"\n    ></navbar>\n    <!-- NAVBAR -->\n\n    <!-- MODAL -->\n    <nuevo-anuncio\n      v-if=\"modal === true\"\n      @hide=\"hideModal\"\n      @toast=\"showToast\"\n      v-bind:modal=\"modal\"\n      v-bind:idAnuncio=\"anuncios.length > 0 ? siguienteAnuncio : 1\"\n    ></nuevo-anuncio>\n    <!-- MODAL -->\n\n    <!-- INFORMACION -->\n    <anuncio\n      v-bind:imagenes=\"imagenes\"\n      v-bind:anuncio=\"$route.params.anuncio\"\n      @showToast=\"showToast\"\n      @addCart=\"addCart\"\n      class=\"mt-5\"\n    ></anuncio>\n    <!-- INFORMACION -->\n\n    <!-- FOOTER -->\n    <footer>\n      <Footer></Footer>\n    </footer>\n    <!-- FOOTER -->\n  </div>\n</template>\n\n<script>\nimport { db, storage } from \"../db\";\nimport Navbar from \"../components/Navbar.vue\";\nimport NuevoAnuncio from \"../components/NuevoAnuncio.vue\";\nimport Anuncio from \"../components/Anuncio.vue\";\nimport Footer from \"../components/Footer.vue\";\nexport default {\n  name: \"Detalles\",\n  components: {\n    Navbar,\n    NuevoAnuncio,\n    Anuncio,\n    Footer,\n  },\n  data() {\n    return {\n      idAct: null,\n      anuncios: [],\n      imagenes: [],\n      modal: false,\n      siguienteAnuncio: 0,\n      carrito: [],\n    };\n  },\n\n  firestore: {\n    anuncios: db.collection(\"anuncios\"),\n  },\n\n  mounted() {\n    this.getImages();\n    // console.log(this.$route.params.carrito);\n    this.carrito = this.$route.params.carrito;    \n  },\n\n  methods: {\n    getNextId() {\n      this.siguienteAnuncio = 0;\n      for (let index = 0; index < this.anuncios.length; index++) {\n        if (this.anuncios[index].idAnuncio > this.siguienteAnuncio) {\n          this.siguienteAnuncio = this.anuncios[index].idAnuncio;\n        }\n      }\n      this.siguienteAnuncio = this.siguienteAnuncio + 1;\n      console.log(this.siguienteAnuncio);\n    },\n\n    getImages() {\n      let ref;\n      let _this = this;\n      let carpeta = storage.ref().child(this.$route.params.anuncio.toString());\n      carpeta.listAll().then((res) => {\n        for (let index = 0; index < res.items.length; index++) {\n          ref = storage.ref(res.items[index].fullPath);\n          ref.getDownloadURL().then((url) => {\n            _this.imagenes.push(url);\n          });\n        }\n      });\n    },\n\n    buscar(cadena){\n      this.$router.push({name: 'Home', params: {carrito: this.$route.params.carrito, cadena: cadena}})\n    },\n\n    addCart(anuncio) {\n      let item = {};\n      let incluye = false;\n      let contador = 0;\n      item.producto = anuncio;\n      item.cantidad = 1;\n      item.subtotal = item.producto.precio * item.cantidad;\n\n      if (this.carrito.length === 0) {\n        this.carrito.push(item);\n        // console.log(this.carrito);\n        this.showToast(\"info\");\n      } else {\n        while (contador < this.carrito.length && incluye === false) {\n          console.log(\n            \"carrito idAnuncio: \" +\n              this.carrito[contador].producto.idAnuncio +\n              \" Item idAnuncio: \" +\n              item.producto.idAnuncio\n          );\n          if (\n            this.carrito[contador].producto.idAnuncio == item.producto.idAnuncio\n          ) {\n            incluye = true;\n            this.carrito[contador].cantidad =\n              this.carrito[contador].cantidad + 1;\n            this.carrito[contador].subtotal =\n              this.carrito[contador].producto.precio *\n              this.carrito[contador].cantidad;\n            this.showToast(\"info\");\n          }\n          contador++;\n        }\n\n        if (incluye === false) {\n          this.carrito.push(item);\n          this.showToast(\"info\");\n        }\n      }\n    },\n\n    showModal(modal) {\n      this.getNextId();\n      this.modal = modal;\n    },\n\n    hideModal(modal) {\n      this.modal = modal;\n    },\n\n    showToast(variant) {\n      let title = \"\";\n      let content = \"\";\n      if (variant) {\n        if (variant === \"info\") {\n          title = \"Carrito\";\n          content = \"Producto añadido al carrito.\";\n        } else {\n          title = \"Nuevo Anuncio\";\n          content = \"Anuncio creado correctamente\";\n        }\n        this.$bvToast.toast(content, {\n          title: title,\n          variant: variant,\n          solid: true,\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n"]}]}